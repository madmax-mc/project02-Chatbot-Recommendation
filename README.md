aiscrap.py 


  1. การดึงข้อมูลด้วย Selenium และ BeautifulSoup: ใช้ Selenium เพื่อเปิดหน้าเว็บ Sephora และใช้ BeautifulSoup เพื่อดึงข้อมูลต่าง ๆ เช่น รายละเอียดสินค้า ราคา ประโยชน์ สูตร ส่วนผสม และอื่น ๆ ดึงข้อมูลจากหลายหน้า (pagination) เพื่อให้ได้รายการสินค้าครบถ้วน


  2. การประมวลผลข้อมูล: เก็บรายละเอียดสินค้าในรูปแบบ dictionary และตรวจสอบข้อมูลที่อาจขาดหาย เช่น ข้อดีของผลิตภัณฑ์ รายการส่วนผสม และเนื้อหาภายในเซ็ต จัดการข้อมูลให้พร้อมเพื่ออัปเดตลงใน Neo4j


  3. การเชื่อมต่อกับฐานข้อมูล Neo4j: ใช้ฟังก์ชัน run_query เพื่อติดต่อกับ Neo4j เพื่อเพิ่มหรืออัปเดตข้อมูลสินค้าที่ดึงมา ลบสินค้าที่ไม่มีอยู่ในเว็บไซต์อีกต่อไป เพื่อให้ฐานข้อมูลทันสมัยอยู่เสมอ


  4. API ของ Flask: สร้าง API ด้วย Flask เพื่อให้สามารถเรียกใช้การดึงข้อมูลสินค้าและอัปเดตฐานข้อมูลผ่าน route /api/products ผลลัพธ์จะถูกส่งกลับในรูปแบบ JSON


ailine3.py


  1. การเชื่อมต่อกับ LINE Bot: 

      บอทสามารถรับข้อความจากผู้ใช้และประมวลผลคำสั่ง เช่น "แบรนด์," "ส่วนลด," และ "คะแนน" รวมถึงสามารถตอบกลับผู้ใช้ด้วยข้อมูลสินค้า และจัดการคำถามเกี่ยวกับผลิตภัณฑ์ความงามได้อย่างมีประสิทธิภาพ 

      บอทสามารถส่ง Flex Messages ที่มีข้อมูลสินค้า รายละเอียด รูปภาพ ราคา และลิงก์ไปยังเว็บไซต์ ซึ่งทำให้ประสบการณ์การใช้งานดูน่าสนใจและสวยงามมากขึ้น


  2. การเชื่อมต่อกับฐานข้อมูล Neo4j: โค้ดนี้ใช้ Neo4j เพื่อเก็บข้อมูลสินค้าและประมวลผลการค้นหา เช่น สินค้าแต่ละแบรนด์ ข้อมูลส่วนลด และการจัดอันดับสินค้า การค้นหาเฉพาะเช่น ดึงข้อมูลสินค้าตามแบรนด์ ส่วนลด หรือการจัดอันดับ และบันทึกประวัติการสนทนาระหว่างบอทและผู้ใช้ในฐานข้อมูล Neo4j เพื่อการใช้งานในอนาคต


  3. การเชื่อมต่อกับ LLaMA API: เมื่อผู้ใช้ถามคำถามเกี่ยวกับผลิตภัณฑ์ บอทจะตรวจสอบคำถามว่ามีความเกี่ยวข้องหรือไม่ และส่งไปยัง API ของ LLaMA เพื่อให้ตอบคำถาม การตอบกลับจะเป็นภาษาไทยที่สุภาพ กระชับ และเน้นผลิตภัณฑ์ความงาม เครื่องสำอาง และน้ำหอมโดยเฉพาะ


  4. Quick Reply: ใช้ฟีเจอร์ Quick Reply ของ LINE เพื่อแสดงปุ่มตัวเลือกให้ผู้ใช้ สามารถเลือกแบรนด์ ส่วนลด หรือคะแนน ซึ่งทำให้ผู้ใช้สามารถโต้ตอบและเลือกตัวเลือกได้ง่ายขึ้น


  5. การบันทึกประวัติการสนทนา: โค้ดนี้มีฟังก์ชันสำหรับบันทึกประวัติการสนทนาของผู้ใช้ เช่น ข้อความที่ผู้ใช้ส่ง และคำตอบจากบอท ซึ่งช่วยให้สามารถติดตามและจดจำการสนทนาในแต่ละครั้ง


  6. การแสดงข้อมูลสินค้า: แสดงสินค้าในรูปแบบ Flex Message ซึ่งมีข้อมูลเกี่ยวกับสินค้า เช่น แบรนด์ ราคา ส่วนลด คะแนน และลิงก์ไปยังเว็บไซต์ของสินค้านั้นๆ



1. รันไฟล์ aiscrap.py จะทำการดึงข้อมูลจากเว็บไซต์ แล้วเก็บไว้ใน neo4j

2. รันไฟล์ ailine3.py รับลิงก์เชื่อมต่อกับไลน์

พิมพ์ "สวัสดี" เพื่อเริ่มต้นใช้งานแชทบอท
